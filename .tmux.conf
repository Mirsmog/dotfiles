# ==============================================
# Tmux Configuration
# ==============================================

# Prefix: Ctrl-a (instead of Ctrl-b)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# ==============================================
# Pane Management
# ==============================================
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ==============================================
# Session Management
# ==============================================
bind r source-file ~/.tmux.conf \; display-message "tmux.conf reloaded"
bind s choose-tree -Zs  # show sessions only
bind w choose-tree -Zw  # show windows only
bind S command-prompt -p "New session name:" "new-session -d -s '%1' ; switch-client -t '%1'"
bind Tab switch-client -l  # switch to last session

# ==============================================
# General Settings
# ==============================================
set -g mouse on
set -g history-limit 100000
set -g base-index 1
setw -g pane-base-index 1

# ==============================================
# Status Bar (Kanagawa Dark theme)
# ==============================================
set -g status-position top
set -g status-interval 5

# Colors
set -g status-style "bg=#16161D,fg=#DCD7BA"
set -g status-left-length 40
set -g status-left "#[bg=#7E9CD8,fg=#1F1F28,bold] #S #[bg=#16161D] "
set -g status-right "#[fg=#7AA89F]#(docker ps -q 2>/dev/null | wc -l | sed 's/^/ğŸ³ /') #[fg=#727169]â”‚ #[fg=#C8C093]%H:%M #[fg=#727169]â”‚ #[fg=#C8C093]%d.%m.%y "

# Window status
set -g window-status-format "#[fg=#727169] #I #[fg=#54546D]â”‚ #[fg=#727169]#W "
set -g window-status-current-format "#[fg=#7E9CD8,bold] #I #[fg=#54546D]â”‚ #[fg=#DCD7BA,bold]#W "
set -g window-status-separator ""

# ==============================================
# Plugins (TPM)
# ==============================================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'

# Initialize TPM (keep this line at the very bottom)
run '~/.tmux/plugins/tpm/tpm'
